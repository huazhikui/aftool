!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.aftool=e():t.aftool=e()}(window,(function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}return r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=0)}([function(t,e,r){"use strict";r.r(e);var n=function(t,e){var r={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(r[n]=t[n]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(n=Object.getOwnPropertySymbols(t);i<n.length;i++)e.indexOf(n[i])<0&&Object.prototype.propertyIsEnumerable.call(t,n[i])&&(r[n[i]]=t[n[i]])}return r};const i=(t,e={},r=!1)=>{let{labelProp:n="label",valueProp:o="value",keyProp:s="key",childrenProp:u="children"}=e;return t.map(t=>{let e=t[u];e&&(e=i(e,{labelProp:n,valueProp:o,keyProp:s,childrenProp:u},r));const c=o.split(".").reduce((t,e)=>t[e],t),l=n.split(".").reduce((t,e)=>t[e],t),a=t[s];let f={};return f.value=c,f.label=l,f.key=a,e&&(f.children=e),r&&(f.meta=t),f})};const o=(t,e="id",r)=>{let i={};return Array.isArray(t)?(i=t.reduce((t,i)=>{let s={};const{children:u}=i,c=n(i,["children"]);return u&&(s=o(i.children,e,r)),Object.assign(Object.assign(Object.assign({},t),{[i[e]]:r?i:c}),s)},{}),i):i},s=(t,e,r,i)=>{let o=i||0;return t.reduce((t,i)=>{if(e&&!e(i,o))return t;const u=r&&r(i,o)||{};if(i.children){let{children:c}=i,l=n(i,["children"]),a=s(c,e,r,o+1);return 0!==a.length&&(l=Object.assign(Object.assign({},l),{children:a})),[...t,Object.assign(Object.assign({},l),u)]}return[...t,Object.assign(Object.assign({},i),u)]},[])};var u={fliter:s,search:function t(e,r,i){if(function(t){let e=!0;return t&&(e=!Object.keys(t).some(e=>{const r=t[e];return"string"==typeof r&&""!==r.trim()||"string"!=typeof r&&!!r||0===r||!1===r})),e}(r))return e;let o=Object.keys(r),s=[];const u=["boolean","number"];return e.forEach(e=>{const{children:c}=e,l=n(e,["children"]);if(o.every(t=>{const n=r[t];if(null==n)return!0;if("function"==typeof n)return n(e[t]);if(u.includes(typeof n))return n===e[t];if("string"==typeof n)return new RegExp(n.trim(),"g").test(e[t]);throw"查询条件不是支持的类型，支持string,number,boolean,function"})){const t=i?e:l;s.push(t)}if(c){const e=t(c,r);s=[...s,...e]}}),s},find:function t(e,r){const n=e.length;for(let i=0;i<n;i++){const n=e[i];if(r(n))return n;const{children:o}=n;if(o){const e=t(o,r);if(e)return e}}return null},standardized:i,toMap:o};class c{constructor(t=[],e){this.action=t=>{this.valueKey=t,this.goNext()},this.ready=(t,e=(()=>{}))=>{this.okList[t]=e,this.goNext()},this.reset=t=>{t&&(this.wait=t),this.okList={},this.myGenerator=this.generatorFunc(),this.goNext()},this.setActionFunc=t=>{this.actionFunc=t},this.destroy=()=>{this.goNext(!0),this.myGenerator=void 0},this.wait=t,e&&(this.actionFunc=e),this.okList={},this.myGenerator=this.generatorFunc(),this.goNext()}goNext(t){this.myGenerator&&this.myGenerator.next(t)}*generatorFunc(){let t;yield;for(let e=0;e<this.wait.length;e++)for(;;){const r=this.okList[this.wait[e]];if(r){r();break}if(t=yield,t)return}for(;;)if(this.actionFunc&&this.actionFunc(this.valueKey),this.valueKey=void 0,t=yield,t)return}}r.d(e,"treetool",(function(){return u})),r.d(e,"StreamControl",(function(){return class{static debounce(t,e,r,n){if(r)return clearTimeout(this._timeout),this._timeout=null,void(this._prevTime=0);const i=(new Date).getTime();if(n&&!this._prevTime)return t(),void(this._prevTime=i);this._prevTime||(this._prevTime=i),i-this._prevTime>e?(t(),this._prevTime=0):(this._timeout&&(clearTimeout(this._timeout),this._timeout=null),this._timeout=setTimeout(()=>{this._prevTime=0,t()},e)),this._prevTime=i}}})),r.d(e,"WaitAction",(function(){return c}))}])}));